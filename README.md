# RF传播计算模型

## 概述
该代码库为射频(RF)传播计算工具，主要用于雷达系统的电磁传播建模与仿真。代码实现了多种雷达功率计算、传播损耗分析和频段分类功能。

这个代码库是一个专业的射频传播计算工具，主要用于雷达和电子战系统的建模仿真。代码实现了从基础的自由空间传播计算到复杂的Blake方程修正，涵盖了雷达系统设计中的核心算法。

该代码库同样也附带了网页交互式的RF传播计算模型，说明见文末。

**核心功能总结**：

1. **传播功率计算** - 实现自由空间和Blake方程两种计算方法
2. **检测距离分析** - 专门针对ESM接收机的检测能力计算
3. **传播参数转换** - 损耗与传播因子之间的相互转换
4. **频段标准化** - 支持美军ECM和IEEE两套频段分类体系

这个库特别适用于雷达系统工程师、电子战专家以及射频工程师进行系统性能分析和设计验证。代码的设计体现了军用软件的严谨性，包含完整的参数校验和边界条件处理。

## 主要功能模块

### 1. 雷达参数结构体 (RadarParameters)
**功能**: 存储雷达系统的关键射频参数

**成员变量**:
- `freqMHz`: 频率 (MHz)
- `antennaGaindBi`: 天线增益 (dBi)
- `noiseFiguredB`: 噪声系数 (dB)
- `pulseWidth_uSec`: 脉冲宽度 (μs)
- `noisePowerdB`: 噪声功率 (dB)
- `systemLossdB`: 系统损耗 (dB)
- `xmtPowerKW`: 发射功率 (kW)
- `xmtPowerW`: 发射功率 (W)
- `hbwD`: 水平波束宽度 (度)

### 2. 自由空间功率计算 (getRcvdPowerFreeSpace)

**功能**: 计算自由空间条件下的接收功率

**输入参数**:
- `rngMeters`: 雷达到目标距离 (m)，必须非零
- `freqMhz`: 发射频率 (MHz)，必须非零
- `powerWatts`: 发射峰值功率 (W)
- `xmtGaindB`: 发射天线增益 (dB)
- `rcvGaindB`: 接收天线增益 (dB)
- `rcsSqm`: 目标雷达散射截面 (m²)
- `systemLossdB`: 总系统损耗 (dB)
- `oneWay`: 是否单程计算 (布尔值)

**输出**: 自由空间接收功率 (dB)

**计算原理**:
- 双程雷达: 使用完整的雷达距离方程，考虑RCS和距离的四次方衰减
- 单程通信: 使用简化的自由空间传播公式，距离平方衰减

### 3. Blake方程功率计算 (getRcvdPowerBlake)

**功能**: 基于Blake雷达方程计算接收功率，考虑传播因子修正

**输入参数**:
- 基本参数与自由空间计算相同
- `ppfdB`: 功率模式传播因子 (dB) - 关键差异参数

**输出**: Blake方程修正后的接收功率 (dB)

**计算原理**: 
- 先计算自由空间功率
- 根据传播因子进行修正：双程乘以4倍ppfdB，单程乘以2倍ppfdB

### 4. ESM接收机检测距离计算 (getOneWayFreeSpaceRangeAndLoss)

**功能**: 计算电子支援措施(ESM)接收机的自由空间检测距离

**输入参数**:
- `xmtGaindB`: 发射天线增益 (dB)
- `xmtFreqMhz`: 发射频率 (MHz)，必须非零
- `xmtrPwrWatts`: 发射峰值功率 (W)，必须非零
- `rcvrSensDbm`: 接收机灵敏度 (dBm)
- `fsLossDb`: 可选输出的自由空间路径损耗 (dB)

**输出**: ESM接收机的自由空间检测距离 (m)

### 5. 传播因子转换 (lossToPpf)

**功能**: 将功率路径损耗转换为功率模式传播因子

**输入参数**:
- `slantRange`: 到目标的距离 (m)，必须 > 0
- `freqMhz`: 发射频率 (MHz)，必须 > 0
- `loss_dB`: 功率模式路径损耗 (dB)

**输出**: 功率模式传播因子 (dB)

**计算关系**: `loss_dB = 自由空间单程损耗 - ppf_dB`

### 6. 频段分类功能

#### US ECM频段分类
**功能**: 将频率转换为美军电子对抗频段分类

**频段范围**:
- A段: 0-250 MHz
- B段: 250-500 MHz
- C段: 500-1000 MHz
- D段: 1000-2000 MHz
- E段: 2000-3000 MHz
- F段: 3000-4000 MHz
- G段: 4000-6000 MHz
- H段: 6000-8000 MHz
- I段: 8000-10000 MHz
- J段: 10000-20000 MHz
- K段: 20000-40000 MHz
- L段: 40000-60000 MHz
- M段: 60000-100000 MHz

#### IEEE频段分类
**功能**: 将频率转换为IEEE标准频段分类

**主要频段**:
- HF: 3-30 MHz
- VHF: 30-300 MHz
- UHF: 300-1000 MHz
- L: 1000-2000 MHz
- S: 2000-4000 MHz
- C: 4000-8000 MHz
- X: 8000-12000 MHz
- Ku: 12000-18000 MHz
- K: 18000-27000 MHz
- Ka: 27000-40000 MHz
- V: 40000-75000 MHz
- W: 75000-110000 MHz
- G: 110000-300000 MHz
- MM (毫米波): 30000-300000 MHz

## 应用场景

1. **雷达系统设计**: 计算雷达的检测距离和接收功率
2. **电子战系统**: ESM接收机性能分析
3. **通信系统**: 单程传播链路预算
4. **频谱管理**: 频段分类和管理
5. **电磁兼容性分析**: 干扰功率计算

## 技术特点

- **高精度计算**: 实现了经典的雷达方程和Blake方程
- **多场景支持**: 同时支持雷达(双程)和通信(单程)场景
- **标准化频段**: 支持军用和民用频段分类标准
- **鲁棒性设计**: 包含输入参数检查和除零保护
- **模块化设计**: 功能独立，便于集成和测试



## 示例

给出的调用示例，展示了RF传播计算库的各种使用场景。

## 主要示例场景：

1. **雷达参数结构体使用** - 展示如何设置和使用RadarParameters结构
2. **自由空间雷达计算** - 典型的雷达检测功率计算
3. **Blake方程计算** - 考虑传播环境影响的修正计算
4. **单程通信链路** - 通信系统的功率预算分析
5. **ESM接收机检测** - 电子战中的截获距离计算
6. **传播因子转换** - 损耗与传播因子的相互转换
7. **频段分类应用** - 自动频段识别和分类
8. **频段范围查询** - 获取特定频段的频率范围
9. **实际系统分析** - 模拟宙斯盾雷达的性能分析

## 关键技术要点：

- **参数设置**：展示了真实的雷达系统参数配置
- **单位转换**：正确处理MHz、kW、dB等单位
- **错误处理**：演示了参数检查的重要性
- **实用计算**：包含信噪比估算等实际工程计算

这个示例可以直接编译运行，为雷达工程师和RF系统设计者提供了完整的参考实现。通过这些例子，用户可以快速理解如何在实际项目中应用这个传播计算库。

----

# 交互式RF传播计算模型

`rf_propagation_examples.html` 是一个交互式的网页，用于RF传播模型的计算和检验。

该网页将包含以下几个独立的计算器模块，每个模块都对应代码库中的一项核心功能：

1. **雷达功率计算器**：结合了 `getRcvdPowerFreeSpace` 和 `getRcvdPowerBlake` 的功能，可以计算自由空间或考虑传播因子时的接收功率。
2. **ESM 截获距离计算器**：实现了 `getOneWayFreeSpaceRangeAndLoss` 的功能，用于计算电子支援措施系统的最大探测距离。
3. **传播因子转换器**：基于 `lossToPpf` 函数，可根据总路径损耗反向计算模式传播因子。
4. **频率波段工具**：集成了 `toUsEcm`, `toIeeeBand` 和 `getFreqMhzRange` 的功能，实现了频率与标准波段之间的双向查询。

每个计算器都预填了示例代码中的参数，方便快速验证和使用。

------

